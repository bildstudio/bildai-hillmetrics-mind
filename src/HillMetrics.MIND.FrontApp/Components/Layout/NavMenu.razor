@using MudBlazor
@inject NavigationManager NavigationManager

<MudNavMenu>
     <AuthorizeView Roles="mind-admin,mind-data-analyst,mind-data-test">
         <Authorized>
    <MudNav>
        <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Dashboard">
            Dashboard
        </MudNavLink>

        <MudNavGroup Title="Flux Management" Icon="@Icons.Material.Filled.DataObject" Expanded="true">
            <MudNavLink Href="/flux/search" Icon="@Icons.Material.Filled.Search">
                Search Flux
            </MudNavLink>
            <MudNavLink Href="/flux/create" Icon="@Icons.Material.Filled.Add">
                Create Flux
            </MudNavLink>
            
            <MudNavGroup Title="Flux Caracs" Icon="@Icons.Material.Filled.Category" Expanded="false">
                <MudNavLink Href="/financial-data/search" Icon="@Icons.Material.Filled.Search">
                    Search Data Points
                </MudNavLink>
                <MudNavLink Href="/financial-data/create" Icon="@Icons.Material.Filled.Add">
                    Create Data Point
                </MudNavLink>
                <MudNavLink Href="/property-mapping/search" Icon="@Icons.Material.Filled.Search">
                    Search Property Types
                </MudNavLink>
                <MudNavLink Href="/property-mapping/create" Icon="@Icons.Material.Filled.Add">
                    Create Property Type
                </MudNavLink>
            </MudNavGroup>
            
            <MudNavGroup Title="Flux / Sandbox mapping" Icon="@Icons.Material.Filled.Storage" Expanded="false">
                <MudNavLink Href="/flux-mappings/search" Icon="@Icons.Material.Filled.List">
                    Mapping Search
                </MudNavLink>
                <MudNavLink Href="/file-data-mapping" Icon="@Icons.Material.Filled.Add">
                    Create Mapping
                </MudNavLink>
                <MudNavLink Href="/flux-sandbox" Icon="@Icons.Material.Filled.Science">
                    Sandbox
                </MudNavLink>
            </MudNavGroup>
            
            <MudNavGroup Title="History" Icon="@Icons.Material.Filled.History" Expanded="false">
                <MudNavLink Href="/flux/fetching-history" Icon="@Icons.Material.Filled.CloudDownload">
                    Fetching History
                </MudNavLink>
                <MudNavLink Href="/flux/processing-history" Icon="@Icons.Material.Filled.PlayCircle">
                    Processing History
                </MudNavLink>
            </MudNavGroup>
            <MudNavLink Href="/flux/errors" Icon="@Icons.Material.Filled.Error">
                Errors
            </MudNavLink>
        </MudNavGroup>

        <MudNavGroup Title="Market" Icon="@Icons.Material.Filled.MonetizationOn" Expanded="false">
            <MudNavLink Href="/prices/search" Icon="@Icons.Material.Filled.PriceChange">
                Search Prices
            </MudNavLink>
            <MudNavLink Href="/trading-venue/search" Icon="@Icons.Material.Filled.Business">
                Search Trading Venues
            </MudNavLink>
        </MudNavGroup>
    </MudNav>

    <MudDivider Class="my-2" />

    <MudNav>
        <MudNavGroup Title="Administration" Icon="@Icons.Material.Filled.AdminPanelSettings" Expanded="false">
            <MudNavLink Href="/settings" Icon="@Icons.Material.Filled.Settings">
                Settings
            </MudNavLink>
            <MudNavLink Href="/logs" Icon="@Icons.Material.Filled.Article">
                System Logs
            </MudNavLink>
        </MudNavGroup>

        <MudNavLink Href="/help" Icon="@Icons.Material.Filled.Help">
            Help & Documentation
        </MudNavLink>
    </MudNav>
        </Authorized>
        </AuthorizeView>
    @*authentication component*@
    <AuthMudNavMenuComponent />
</MudNavMenu>

@code {
    private bool IsActive(string href)
    {
        var relativePath = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        return relativePath.StartsWith(href);
    }
}

